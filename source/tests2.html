<!DOCTYPE html>
<html>
<head>
	<title>Test !</title>
	<style type="text/css">

		#controls input[type="text"]{
			width: 25px;
		}

	</style>
</head>
<body>
<div id="controls">
	<form>
		p1 (red) &nbsp; : From : 
		<input type="text" id="p1x1">
		<input type="text" id="p1y1"> 
		To: 
		<input type="text" id="p1x2">
		<input type="text" id="p1y2"> 
		<br/>

		p2 (green) From : 
		<input type="text" id="p2x1">
		<input type="text" id="p2y1"> 
		To: 
		<input type="text" id="p2x2">
		<input type="text" id="p2y2"> 
		<br/>

		p3 (blue) &nbsp; From : 
		<input type="text" id="p3x1">
		<input type="text" id="p3y1"> 
		To: 
		<input type="text" id="p3x2">
		<input type="text" id="p3y2"> 
		<br/>

		<input type="submit" value="Dijkstra Improved" id="launch">

		<div id="timer"></div>
	</form>
</div>
<div id="test_result"></div>

<script type="text/javascript" src="array_utils.js"></script>
<script type="text/javascript" src="ordered_stack.js"></script>
<script type="text/javascript" src="graph.js"></script>
<script type="text/javascript">

	// Data values
	var turn = 0;
	var data = ["************************************************",
                "*      *              *    11               A  *",
                "* ** A  *   ********** *             *   *     *",
                "* **    *      *     * * *******     *****     *",
                "*  *    ****   * G*  *   GGG      *  *         *",
                "*  *         *  * G*  *******     *  ******    *",
                "*                GG* *      *     *       **   *",
                "*****G********************  *  ********   *    *",
                "*  GGGG  * GGGG   *         *         *   *  * *",
                "* *** GG * G*G*****  ***    ******    *   *    *",
                "*GGGGGG  * G*G*       *          *    *   **   *",
                "* G****  *        *************  ******   *    *",
                "* GGGGGGGGG *   P     GGGG   *           *     *",
                "****** ******     **** GGGG   *      ********  *",
                "*           *     *      GGG  *                *",
                "*  ******   *        666                       *",
                "*   *             P                     D      *",
                "*    D      *              22                  *",
                "************************************************"];

    // Create graph
	var g = new Graph(data, true);
	// Show the generated graph in 'test_result'
	document.getElementById('test_result').appendChild(g.debugDraw());

	document.getElementById("launch").onclick = function() {

		var pawn1 = new Pawn("1");
		var pawn3 = new Pawn("2");
		var pawn2 = new Pawn("3");

		var p1y1 = document.getElementById("p1x1").value;
		var p1x1 = document.getElementById("p1y1").value;
		var p1y2 = document.getElementById("p1x2").value;
		var p1x2 = document.getElementById("p1y2").value;

		var p1nodeA = g.getNodeAt(p1x1,p1y1);
		var p1nodeB = g.getNodeAt(p1x2,p1y2);

		var p2y1 = document.getElementById("p2x1").value;
		var p2x1 = document.getElementById("p2y1").value;
		var p2y2 = document.getElementById("p2x2").value;
		var p2x2 = document.getElementById("p2y2").value;

		var p2nodeA = g.getNodeAt(p2x1,p2y1);
		var p2nodeB = g.getNodeAt(p2x2,p2y2);

		var p3y1 = document.getElementById("p3x1").value;
		var p3x1 = document.getElementById("p3y1").value;
		var p3y2 = document.getElementById("p3x2").value;
		var p3x2 = document.getElementById("p3y2").value;

		var p3nodeA = g.getNodeAt(p3x1,p3y1);
		var p3nodeB = g.getNodeAt(p3x2,p3y2);


		if(p1nodeA && p1nodeB && p2nodeB && p2nodeA && p3nodeB && p3nodeB) {
			var start = new Date().getTime();
			var p1path = g.dijkstraImproved(p1nodeA, p1nodeB, turn, pawn1);
			var p2path = g.dijkstraImproved(p2nodeA, p2nodeB, turn, pawn2);
			var p3path = g.dijkstraImproved(p3nodeA, p3nodeB, turn, pawn3);
			var time = new Date().getTime() - start;

			document.getElementById('timer').innerHTML = '( in '+time+' ms)';

			document.getElementById('test_result').innerHTML = '';
			document.getElementById('test_result').appendChild(g.debugDraw([ p1path, p2path, p3path ]));
		} else {
			alert("Error : no node could be selected");
		}

		return false;
	};

</script>

</body>
</html>